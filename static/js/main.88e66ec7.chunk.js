(this["webpackJsonpwould-you-rather"]=this["webpackJsonpwould-you-rather"]||[]).push([[0],{70:function(e,t,n){e.exports=n(84)},84:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(18),s=n.n(o),c=(n(75),n(6)),u=n.n(c),i=n(27),l=n(92),m=n(86),d=n(97),p=n(96),h=n(87),f=n(11),b=n(12),v=n(9),E={sarahedo:{id:"sarahedo",name:"Sarah Edo",avatarURL:"https://pbs.twimg.com/profile_images/2958377871/1badc51c9ffa183c28ecefec1bc8a1a5_400x400.jpeg",answers:{"8xf0y6ziyjabvozdd253nd":"optionOne","6ni6ok3ym7mf1p33lnez":"optionOne",am8ehyc8byjqgar0jgpub9:"optionTwo",loxhs1bqm25b708cmbf3g:"optionTwo"},questions:["8xf0y6ziyjabvozdd253nd","am8ehyc8byjqgar0jgpub9"]},tylermcginnis:{id:"tylermcginnis",name:"Tyler McGinnis",avatarURL:"https://pbs.twimg.com/profile_images/1138547910524588034/4R6jdBch_400x400.png",answers:{vthrdm985a262al8qx3do:"optionOne",xj352vofupe1dqz9emx13r:"optionTwo"},questions:["loxhs1bqm25b708cmbf3g","vthrdm985a262al8qx3do"]},johndoe:{id:"johndoe",name:"John Doe",avatarURL:"https://pbs.twimg.com/profile_images/582222032739266561/GVZk2caU_400x400.jpg",answers:{xj352vofupe1dqz9emx13r:"optionOne",vthrdm985a262al8qx3do:"optionTwo","6ni6ok3ym7mf1p33lnez":"optionOne"},questions:["6ni6ok3ym7mf1p33lnez","xj352vofupe1dqz9emx13r"]}},O={"8xf0y6ziyjabvozdd253nd":{id:"8xf0y6ziyjabvozdd253nd",author:"sarahedo",timestamp:1467166872634,optionOne:{votes:["sarahedo"],text:"have horrible short term memory"},optionTwo:{votes:[],text:"have horrible long term memory"}},"6ni6ok3ym7mf1p33lnez":{id:"6ni6ok3ym7mf1p33lnez",author:"johndoe",timestamp:1468479767190,optionOne:{votes:["johndoe","sarahedo"],text:"become a superhero"},optionTwo:{votes:[],text:"become a supervillian"}},am8ehyc8byjqgar0jgpub9:{id:"am8ehyc8byjqgar0jgpub9",author:"sarahedo",timestamp:1488579767190,optionOne:{votes:[],text:"be telekinetic"},optionTwo:{votes:["sarahedo"],text:"be telepathic"}},loxhs1bqm25b708cmbf3g:{id:"loxhs1bqm25b708cmbf3g",author:"tylermcginnis",timestamp:1482579767190,optionOne:{votes:[],text:"be a front-end developer"},optionTwo:{votes:["sarahedo"],text:"be a back-end developer"}},vthrdm985a262al8qx3do:{id:"vthrdm985a262al8qx3do",author:"tylermcginnis",timestamp:1489579767190,optionOne:{votes:["tylermcginnis"],text:"find $50 yourself"},optionTwo:{votes:["johndoe"],text:"have your best friend find $500"}},xj352vofupe1dqz9emx13r:{id:"xj352vofupe1dqz9emx13r",author:"johndoe",timestamp:1493579767190,optionOne:{votes:["johndoe"],text:"write JavaScript"},optionTwo:{votes:["tylermcginnis"],text:"write Swift"}}};function w(e){return new Promise((function(t,n){var a=e.author,r=function(e){var t=e.optionOneText,n=e.optionTwoText,a=e.author;return{id:Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),timestamp:Date.now(),author:a,optionOne:{votes:[],text:t},optionTwo:{votes:[],text:n}}}(e);setTimeout((function(){O=Object(v.a)({},O,Object(b.a)({},r.id,r)),E=Object(v.a)({},E,Object(b.a)({},a,Object(v.a)({},E[a],{questions:E[a].questions.concat([r.id])}))),t(r)}),1e3)}))}function g(e){var t=e.authedUser,n=e.qid,a=e.answer;return new Promise((function(e,r){setTimeout((function(){E=Object(v.a)({},E,Object(b.a)({},t,Object(v.a)({},E[t],{answers:Object(v.a)({},E[t].answers,Object(b.a)({},n,a))}))),O=Object(v.a)({},O,Object(b.a)({},n,Object(v.a)({},O[n],Object(b.a)({},a,Object(v.a)({},O[n][a],{votes:O[n][a].votes.concat([t])}))))),e()}),500)}))}function j(){return u.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.awrap(new Promise((function(e,t){setTimeout((function(){return e(Object(v.a)({},E))}),1e3)})));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}))}function y(){return u.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.awrap(new Promise((function(e,t){setTimeout((function(){return e(Object(v.a)({},O))}),1e3)})));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}))}function x(e){return u.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.a.awrap(w(e));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}))}function q(e){return u.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.a.awrap(g(e));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}))}function T(e){return{type:"SET_AUTHED_USER",user:e}}function S(e){return{type:"USERS_RECEIVED",users:e}}var U=Object(f.b)((function(e){return{authedUser:e.authedUser,users:e.users}}),{setAuthedUser:T,usersReceived:S})((function(e){var t=e.authedUser,n=e.setAuthedUser,o=e.users,s=e.usersReceived,c=null===t,f=Object(a.useState)(null),b=Object(i.a)(f,2),v=b[0],E=b[1];return Object(a.useEffect)((function(){o||function(){var e;u.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.a.awrap(j());case 2:e=t.sent,s(e);case 4:case"end":return t.stop()}}))}()})),r.a.createElement(l.a,{show:c,onHide:function(){}},r.a.createElement(l.a.Header,null,r.a.createElement(l.a.Title,null,"Select a user to login")),r.a.createElement(l.a.Body,null,!o&&r.a.createElement("div",{className:"text-center mb-1"},r.a.createElement(m.a,{animation:"border"})),o&&r.a.createElement(d.a,{className:"mb-3 w-100"},Object.keys(o).map((function(e){return o[e]})).map((function(e){return r.a.createElement(d.a.Item,{key:e.id,eventKey:e.id,active:v&&v.id===e.id,onClick:function(){return E(e)}},r.a.createElement(p.a.Image,{width:50,height:50,src:e.avatarURL,roundedCircle:!0,thumbnail:!0,className:"mr-2"}),"".concat(e.name," (").concat(e.id,")"))}))),r.a.createElement(h.a,{className:"w-100",onClick:function(){return n(v)},disabled:null===v},"Login")))})),N=n(95),k=n(68),I=n(25),R=n(88),C=n(89),_=n(67),z=n(98),Q=n(93),A=n(94);function D(e){return{type:"QUESTIONS_RECEIVED",questions:e}}var J=Object(f.b)((function(e){return{authedUser:e.authedUser}}),{addQuestion:function(e){return{type:"ADD_QUESTION",question:e}}})((function(e){var t=e.authedUser,n=e.addQuestion,o=Object(a.useState)({}),s=Object(i.a)(o,2),c=s[0],l=c.lastOption1,m=c.lastOption2,d=s[1],p=Object(a.useState)(""),f=Object(i.a)(p,2),b=f[0],v=f[1],E=Object(a.useState)(""),O=Object(i.a)(E,2),w=O[0],g=O[1],j=Object(a.useState)(!1),y=Object(i.a)(j,2),q=y[0],T=y[1],S=Object(a.useState)(!1),U=Object(i.a)(S,2),N=U[0],k=U[1],D=null;Object(a.useEffect)((function(){return clearTimeout(D)}));var J=function(e,t){e.preventDefault(),t(e.target.value)};return N?r.a.createElement(I.a,{to:"/questions"}):r.a.createElement(r.a.Fragment,null,r.a.createElement(R.a,null,r.a.createElement(C.a,null,r.a.createElement(_.a,null),r.a.createElement(_.a,{xs:10},r.a.createElement(z.a,{className:"text-center"},r.a.createElement(z.a.Header,null,r.a.createElement(z.a.Title,null,"Create New Question")),r.a.createElement(z.a.Body,null,r.a.createElement(Q.a,null,r.a.createElement(Q.a.Group,null,r.a.createElement(Q.a.Text,null,"Would you rather..."),r.a.createElement(Q.a.Control,{type:"text",placeholder:"Type 1st option here",value:b,onChange:function(e){return J(e,v)}}),r.a.createElement(Q.a.Text,null,"OR"),r.a.createElement(Q.a.Control,{type:"text",placeholder:"Type 2nd option here",value:w,onChange:function(e){return J(e,g)}})),r.a.createElement(h.a,{disabled:0===b.trim().length||0===w.trim().length,onClick:function(){return function(){var e,a;return u.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return e={optionOneText:b.trim(),optionTwoText:w.trim(),author:t.id},v(""),g(""),r.next=5,u.a.awrap(x(e));case 5:a=r.sent,n(a),d({lastOption1:a.optionOne.text,lastOption2:a.optionTwo.text}),T(!0),D=setTimeout((function(){T(!1),k(!0)}),1500);case 10:case"end":return r.stop()}}))}()},className:"w-100"},"Submit"))))),r.a.createElement(_.a,null))),r.a.createElement(A.a,{show:q,style:{position:"absolute",top:0,left:"50%",transform:"translateX(-50%)"},onClose:function(){return T(!1)}},r.a.createElement(A.a.Header,null,r.a.createElement("strong",{className:"mr-auto"},"Would you rather..."),r.a.createElement("small",{className:"ml-4"},"just added")),r.a.createElement(A.a.Body,{className:"text-center"},r.a.createElement("p",null,l),r.a.createElement("p",null,"OR"),r.a.createElement("p",null,m))))})),L=n(99),V=n(91),B=n(90);var H=Object(f.b)((function(e){return{authedUser:e.authedUser}}))((function(e){var t=e.authedUser,n=e.message;return t?r.a.createElement("div",{className:"text-center",style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%)"}},r.a.createElement("h1",null,"404"),r.a.createElement("h1",null,n||"Page not found")):r.a.createElement("div",null)}));var W=Object(f.b)((function(e){return{authedUser:e.authedUser,questions:e.questions}}),{answerQuestion:function(e){return{type:"ANSWER_QUESTION",qid:e.qid,answer:e.answer,authedUserId:e.authedUserId}},questionsReceived:D})((function(e){var t=e.questions,n=e.questionsReceived,o=e.questionId,s=e.question,c=e.authedUser,i=e.answerQuestion,l=e.showTotalVotes,d=Object(I.g)();if(Object(a.useEffect)((function(){null===t&&function(){var e;u.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.a.awrap(y());case 2:e=t.sent,n(e);case 4:case"end":return t.stop()}}))}()})),!t)return r.a.createElement("div",{className:"text-center mt-4"},r.a.createElement(m.a,{animation:"border"}));if(!(s=s||t[o]))return r.a.createElement(H,{message:"Question not found"});var p=c&&c.answers&&c.answers[s.id],f=null!=p,b=s.optionOne.votes.length+s.optionTwo.votes.length,v=function(e){switch(e){case 0:return"no votes";case 1:return"1 vote";default:return"".concat(e," votes")}},E=function(e){var t;return u.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t={qid:s.id,answer:e,authedUser:c.id},i(t),n.next=4,u.a.awrap(q(t));case 4:case"end":return n.stop()}}))};return r.a.createElement(z.a,null,r.a.createElement(z.a.Body,null,r.a.createElement(z.a.Title,null,"Would you rather...",null==o&&r.a.createElement(h.a,{className:"ml-2",variant:"secondary",size:"sm",onClick:function(e){e.preventDefault(),d.push("/questions/".concat(s.id))}},"Details")),r.a.createElement(R.a,{className:"mw-100 p-0"},r.a.createElement(C.a,null,r.a.createElement(_.a,{sm:8},r.a.createElement(h.a,{disabled:f,onClick:function(){return E("optionOne")}},s.optionOne.text),f&&l&&r.a.createElement("span",{className:"ml-3"},Math.round(s.optionOne.votes.length/b*100),"% (",v(s.optionOne.votes.length),")"),p&&"optionOne"===p&&r.a.createElement(B.a,{variant:"secondary",className:"ml-2"},"my vote"),r.a.createElement(z.a.Text,{className:"mt-3"},"OR"),r.a.createElement(h.a,{disabled:f,onClick:function(){return E("optionTwo")}},s.optionTwo.text),f&&l&&r.a.createElement("span",{className:"ml-3"},Math.round(s.optionTwo.votes.length/b*100),"% (",v(s.optionTwo.votes.length),")"),p&&"optionTwo"===p&&r.a.createElement(B.a,{variant:"secondary",className:"ml-2"},"my vote"))))))}));var K=Object(f.b)((function(e){return{authedUser:e.authedUser,questions:e.questions}}),{questionsReceived:D})((function(e){var t=e.authedUser,n=e.questions,o=e.questionsReceived;if(Object(a.useEffect)((function(){null===n&&function(){var e;u.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.a.awrap(y());case 2:e=t.sent,o(e);case 4:case"end":return t.stop()}}))}()})),null==n)return r.a.createElement("div",{className:"text-center mt-4"},r.a.createElement(m.a,{animation:"border"}));var s=Object.keys(n).map((function(e){return n[e]})).sort((function(e,t){return t.timestamp-e.timestamp})),c=function(e){return!!t&&Object.keys(t.answers).includes(e.id)},i=s.filter((function(e){return!c(e)})),l=s.filter((function(e){return c(e)}));return r.a.createElement(L.a,{defaultActiveKey:"unanswer"},r.a.createElement(V.a,{eventKey:"unanswer",title:"Unanswer Questions (".concat(i.length,")")},r.a.createElement(d.a,{variant:"flush"},i.map((function(e){return r.a.createElement(d.a.Item,{key:e.id},r.a.createElement(W,{question:e}))})))),r.a.createElement(V.a,{eventKey:"answered",title:"Answered Questions (".concat(l.length,")")},r.a.createElement(d.a,{variant:"flush"},l.map((function(e){return r.a.createElement(d.a.Item,{key:e.id},r.a.createElement(W,{question:e,showTotalVotes:!1}))})))))}));function M(e){var t=e.user,n=t.questions.length,o=Object.keys(t.answers).length,s=n+o;return r.a.createElement(a.Fragment,null,r.a.createElement(p.a.Image,{width:50,height:50,src:t.avatarURL,roundedCircle:!0,thumbnail:!0,className:"mr-2"}),t.name," (",t.id,")",r.a.createElement("br",null),"Total Votes: ",s,r.a.createElement("br",null),"Questions: ",n,r.a.createElement("br",null),"Answers: ",o)}var P=Object(f.b)((function(e){return{users:e.users}}),{usersReceived:S})((function(e){var t=e.users,n=e.usersReceived;if(Object(a.useEffect)((function(){null===t&&function(){var e;u.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.a.awrap(j());case 2:e=t.sent,n(e);case 4:case"end":return t.stop()}}))}()})),null==t)return r.a.createElement("div",{className:"text-center mt-4"},r.a.createElement(m.a,{animation:"border"}));var o=Object.keys(t).map((function(e){return t[e]})).sort((function(e,t){return Object.keys(t.answers).length+t.questions.length-(Object.keys(e.answers).length+e.questions.length)}));return r.a.createElement(d.a,{variant:"flush"},o.map((function(e){return r.a.createElement(d.a.Item,{key:e.id},r.a.createElement(M,{user:e}))})))}));var G=Object(f.b)((function(e){return{authedUser:e.authedUser}}),{setAuthedUser:T})((function(e){var t=e.authedUser,n=e.setAuthedUser,a=Object(I.h)(),o=Object(I.g)();return r.a.createElement("div",null,null===t&&r.a.createElement(U,null),r.a.createElement(N.a,{bg:"light",expand:"lg",collapseOnSelect:!0},r.a.createElement(N.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),r.a.createElement(N.a.Collapse,{id:"responsive-navbar-nav"},r.a.createElement(k.a,{className:"mr-auto",activeKey:a.pathname},r.a.createElement(k.a.Link,{onClick:function(){"/questions"!==o.location.pathname&&o.push("/questions")}},"Questions"),r.a.createElement(k.a.Link,{onClick:function(){"/add"!==o.location.pathname&&o.push("/add")}},"New Question"),r.a.createElement(k.a.Link,{onClick:function(){"/leaderboard"!==o.location.pathname&&o.push("/leaderboard")}},"Leaderboard")),t&&r.a.createElement(k.a,null,r.a.createElement(N.a.Text,{className:"mr-2"},t&&"Signed in as: ".concat(t.name," (").concat(t.id,")")),r.a.createElement(p.a.Image,{width:40,height:32,src:t.avatarURL,roundedCircle:!0,thumbnail:!0,className:"mr-2 mt-0 mb-0"}),r.a.createElement(h.a,{disabled:null===t,onClick:function(){return n(null)}},"Logout")))),r.a.createElement(I.d,null,r.a.createElement(I.b,{exact:!0,path:"/questions",component:K}),r.a.createElement(I.b,{exact:!0,path:"/questions/:id",render:function(e){var t=e.match.params.id;return r.a.createElement(W,{questionId:t,showVotes:!0,disableVoteAction:!0,showTotalVotes:!0,showAuthor:!0})}}),r.a.createElement(I.b,{exact:!0,path:"/add",component:J}),r.a.createElement(I.b,{exact:!0,path:"/leaderboard",component:P}),r.a.createElement(I.b,{component:H})))})),F=n(28);var $=Object(F.c)({authedUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:JSON.parse(localStorage.getItem("authedUser")),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_AUTHED_USER":var n=t.user;return n?localStorage.setItem("authedUser",JSON.stringify(n)):localStorage.removeItem("authedUser"),n;case"ADD_QUESTION":return Object(v.a)({},e,{questions:e.questions.concat([t.question.id])});case"ANSWER_QUESTION":return Object(v.a)({},e,{answers:Object(v.a)({},e.answers,Object(b.a)({},t.qid,t.answer))});default:return e}},questions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:JSON.parse(localStorage.getItem("questions")),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"QUESTIONS_RECEIVED":var n=Object(v.a)({},e,{},t.questions);return localStorage.setItem("questions",JSON.stringify(n)),n;case"ADD_QUESTION":var a=Object(v.a)({},e,Object(b.a)({},t.question.id,t.question));return localStorage.setItem("questions",JSON.stringify(a)),a;case"ANSWER_QUESTION":var r=Object(v.a)({},e,Object(b.a)({},t.qid,Object(v.a)({},e[t.qid],Object(b.a)({},t.answer,Object(v.a)({},e[t.qid][t.answer],{votes:e[t.qid][t.answer].votes.concat(t.authedUser)})))));return localStorage.setItem("questions",JSON.stringify(r)),r;default:return e}},users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:JSON.parse(localStorage.getItem("users")),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USERS_RECEIVED":var n=t.users;return localStorage.setItem("users",JSON.stringify(n)),n;default:return e}}}),X=n(33),Z=n(69),Y=Object(F.d)($,Object(F.a)(Z.a,(function(e){return function(t){return function(n){console.group(n.type),console.log("Action:",n);var a=t(n);return console.log("New State:",e.getState()),console.groupEnd(),a}}})));s.a.render(r.a.createElement(X.a,{basename:"/"},r.a.createElement(f.a,{store:Y},r.a.createElement(G,null))),document.getElementById("root"))}},[[70,1,2]]]);
//# sourceMappingURL=main.88e66ec7.chunk.js.map